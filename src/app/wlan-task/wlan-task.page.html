<ion-header translucent="true">
  <ion-toolbar>
    <ion-title>Aufgabe</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content fullscreen="true" class="page">
  <div class="shell">
    <ion-card class="task-card">
      <ion-card-content>

        <div class="task-head">
          <div class="dot"></div>
          <div>
            <div class="task-title">{{ taskTitle }}</div>
            <div class="task-sub">{{ taskDesc }}</div>
          </div>
        </div>

        <div class="panel">
          <ion-button
            expand="block"
            size="large"
            class="primary"
            [disabled]="state !== 'idle'"
            (click)="startTask()"
          >
            Task starten
          </ion-button>

          <div class="panel-sub">
            WLAN verbunden:
            <b>{{ wasConnected ? '✓' : '—' }}</b><br />
            WLAN getrennt:
            <b>{{ wasDisconnected ? '✓' : '—' }}</b>
          </div>

          <!-- Abschliessen: wird blau sobald erfolgreich -->
          <ion-button
            expand="block"
            size="large"
            class="finish"
            [class.primary]="canFinish"
            [disabled]="!canFinish"
            (click)="finishTask()"
          >
            Abschliessen
          </ion-button>
        </div>

      </ion-card-content>
    </ion-card>
  </div>
</ion-content>

<ion-footer class="footer" translucent="true">
  <div class="footer-row center">
    <!-- Zurück immer zentriert -->
    <ion-button
      fill="clear"
      class="footer-btn back-btn"
      (click)="cancelRun()"
    >
      Zurück
    </ion-button>

    <!-- Überspringen nur solange NICHT erfolgreich -->
    <ion-button
      class="footer-btn primary skip-btn"
      *ngIf="!canFinish"
      (click)="skipTask()"
    >
      Überspringen
    </ion-button>
  </div>
</ion-footer>
