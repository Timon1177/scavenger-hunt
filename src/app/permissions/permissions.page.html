<ion-header translucent="true">
  <ion-toolbar>
    <ion-title>Berechtigungen</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content fullscreen="true" class="page">
  <div class="shell">
    <ion-card class="task-card">
      <ion-card-content>
        <div class="subline">{{ subtitle }}</div>

        <div class="section-label">SICHERHEIT</div>
        <div class="perm-title">{{ headline }}</div>
        <div class="perm-sub">{{ description }}</div>

        <div class="perm-panel">
          <div class="perm-row">
            <div class="left">
              <span
                class="dot-mini"
                [class.ok]="dotClass(locationPerm) === 'ok'"
                [class.bad]="dotClass(locationPerm) === 'bad'"
              ></span>
              <span>Standort</span>
            </div>

            <div class="pill" [class.ok]="locationPerm === 'granted'">
              {{ labelFor(locationPerm) }}
            </div>
          </div>

          <div class="perm-row">
            <div class="left">
              <span
                class="dot-mini"
                [class.ok]="dotClass(cameraPerm) === 'ok'"
                [class.bad]="dotClass(cameraPerm) === 'bad'"
              ></span>
              <span>Kamera</span>
            </div>

            <div class="pill" [class.ok]="cameraPerm === 'granted'">
              {{ labelFor(cameraPerm) }}
            </div>
          </div>
        </div>

        <!-- Positiver Status -->
        <div *ngIf="canContinue" class="success">
          <div class="success-title">Alles bereit.</div>
          <div class="success-sub">Berechtigungen sind erteilt.</div>
        </div>

        <!-- Ein Button für beide Berechtigungen -->
        <ion-button
          *ngIf="!canContinue"
          expand="block"
          size="large"
          class="primary"
          (click)="requestAll()"
        >
          Berechtigungen erteilen
        </ion-button>

        <!-- Weiter Button, sobald alles erteilt ist -->
        <ion-button
          *ngIf="canContinue"
          expand="block"
          size="large"
          class="primary"
          (click)="next()"
        >
          Weiter
        </ion-button>
      </ion-card-content>
    </ion-card>
  </div>
</ion-content>

<ion-footer class="footer" translucent="true">
  <div class="footer-row">
    <ion-button class="footer-btn" fill="clear" (click)="back()">Zurück</ion-button>
  </div>
</ion-footer>
